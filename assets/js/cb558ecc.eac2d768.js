"use strict";(self.webpackChunkfeldera_docs=self.webpackChunkfeldera_docs||[]).push([[5017],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var t=i(96540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}},55293:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"get-started/enterprise/authentication/okta-sso","title":"Okta SSO","description":"This guide explains how to configure Okta as an authentication provider for Feldera Enterprise.","source":"@site/docs/get-started/enterprise/authentication/okta-sso.md","sourceDirName":"get-started/enterprise/authentication","slug":"/get-started/enterprise/authentication/okta-sso","permalink":"/get-started/enterprise/authentication/okta-sso","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AWS Cognito","permalink":"/get-started/enterprise/authentication/aws-cognito"},"next":{"title":"HTTPS","permalink":"/get-started/enterprise/https"}}');var s=i(74848),r=i(28453);const o={},a="Okta SSO",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Okta Application Setup",id:"okta-application-setup",level:2},{value:"1. Create Okta Application",id:"1-create-okta-application",level:3},{value:"2. Configure Grant Types",id:"2-configure-grant-types",level:3},{value:"3. Configure Redirect URLs",id:"3-configure-redirect-urls",level:3},{value:"4. Create a Custom Authorization Server",id:"4-create-a-custom-authorization-server",level:3},{value:"Custom Authorization Server Setup",id:"custom-authorization-server-setup",level:2},{value:"1. Create Authorization Server",id:"1-create-authorization-server",level:3},{value:"2. Set up an Access Policy",id:"2-set-up-an-access-policy",level:3},{value:"3. Configure Custom Claims",id:"3-configure-custom-claims",level:3},{value:"Tenant Assignment with custom claims",id:"tenant-assignment-with-custom-claims",level:2},{value:"<code>tenants</code> claim",id:"tenants-claim",level:3},{value:"Authorization through group membership with a custom claim",id:"authorization-through-group-membership-with-a-custom-claim",level:2},{value:"Configure Feldera",id:"configure-feldera",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"okta-sso",children:"Okta SSO"})}),"\n",(0,s.jsx)(n.p,{children:"This guide explains how to configure Okta as an authentication provider for Feldera Enterprise."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Okta integration allows organizations to leverage existing and dedicated Okta user groups for access control."}),"\n",(0,s.jsx)(n.h2,{id:"okta-application-setup",children:"Okta Application Setup"}),"\n",(0,s.jsx)(n.h3,{id:"1-create-okta-application",children:"1. Create Okta Application"}),"\n",(0,s.jsx)(n.p,{children:"In your Okta Admin Dashboard:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Navigate to ",(0,s.jsx)(n.strong,{children:"Applications"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Create App Integration"})]}),"\n",(0,s.jsxs)(n.li,{children:["Select ",(0,s.jsx)(n.strong,{children:"OIDC - OpenID Connect"})," as the sign-in method"]}),"\n",(0,s.jsxs)(n.li,{children:["Choose ",(0,s.jsx)(n.strong,{children:"Single-Page Application (SPA)"})," as the application type"]}),"\n",(0,s.jsxs)(n.li,{children:["Fill in application details:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"App integration name"}),": ",(0,s.jsx)(n.code,{children:"Feldera"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"App logo"}),": Upload your organization's logo (optional)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-configure-grant-types",children:"2. Configure Grant Types"}),"\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.strong,{children:"General Settings"})," tab:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Enable ",(0,s.jsx)(n.strong,{children:"Authorization Code"})," grant type"]}),"\n",(0,s.jsxs)(n.li,{children:["Ensure ",(0,s.jsx)(n.strong,{children:"Refresh Token"})," is enabled for long-lived sessions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PKCE"})," is automatically enabled for SPA applications (recommended for security)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-configure-redirect-urls",children:"3. Configure Redirect URLs"}),"\n",(0,s.jsx)(n.p,{children:"Add the following URLs to your Okta application:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sign-in redirect URIs"}),": ",(0,s.jsx)(n.code,{children:"https://<your-feldera-domain>/auth/callback/"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sign-out redirect URIs"}),": ",(0,s.jsx)(n.code,{children:"https://<your-feldera-domain>/"})]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Important:"})," The trailing slash (",(0,s.jsx)(n.code,{children:"/"}),") in the callback URL ",(0,s.jsx)(n.strong,{children:"must be included"}),". Okta requires exact URL matching."]})}),"\n",(0,s.jsx)(n.p,{children:"You can skip Trusted Origins configuration."}),"\n",(0,s.jsx)(n.h3,{id:"4-create-a-custom-authorization-server",children:"4. Create a Custom Authorization Server"}),"\n",(0,s.jsx)(n.p,{children:"After creating the app, to take advantage of the flexible tenant-based authorization models you need to set up a custom authorization server that issues custom claims in the Access OIDC token based on Okta user groups."}),"\n",(0,s.jsx)(n.h2,{id:"custom-authorization-server-setup",children:"Custom Authorization Server Setup"}),"\n",(0,s.jsx)(n.h3,{id:"1-create-authorization-server",children:"1. Create Authorization Server"}),"\n",(0,s.jsx)(n.p,{children:"In your Okta Admin Dashboard:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Navigate to ",(0,s.jsx)(n.strong,{children:"Security"})," \u2192 ",(0,s.jsx)(n.strong,{children:"API"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Authorization Servers"})]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Add Authorization Server"})]}),"\n",(0,s.jsxs)(n.li,{children:["Fill in server details:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Name"}),": ",(0,s.jsx)(n.code,{children:"Feldera"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Audience"}),": ",(0,s.jsx)(n.code,{children:"feldera-api"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Description"}),": ",(0,s.jsx)(n.code,{children:"Authorization server for Feldera tenant and group claims"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["By default, Feldera expects ",(0,s.jsx)(n.code,{children:"feldera-api"})," audience value. If you want to use the default value from Okta you need to specify it in the ",(0,s.jsx)(n.code,{children:"authAudience"})," option in your Helm config."]})}),"\n",(0,s.jsx)(n.h3,{id:"2-set-up-an-access-policy",children:"2. Set up an Access Policy"}),"\n",(0,s.jsx)(n.p,{children:"Ensure there is a policy that will allow user authentication. For a simple setup:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:'Press "Add New Access Policy", fill the name and description, in the selector "Assign to" pick "The following clients:" and find the name of the Feldera application(s) you created before, and confirm the creation.'}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:'Press "Add rule", and ensure that the following options are selected:'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'IF Grant type is - "Authorization Code"'}),"\n",(0,s.jsx)(n.li,{children:'AND Scopes requested - "Any scopes"'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The rest can be configured as needed."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-configure-custom-claims",children:"3. Configure Custom Claims"}),"\n",(0,s.jsx)(n.p,{children:"You can take advantage of the supported authorization models by properly configuring the custom OIDC claims."}),"\n",(0,s.jsx)(n.h2,{id:"tenant-assignment-with-custom-claims",children:"Tenant Assignment with custom claims"}),"\n",(0,s.jsxs)(n.p,{children:["Feldera supports multiple authorization use-cases through ",(0,s.jsx)(n.a,{href:"/get-started/enterprise/authentication/#Managed%20Tenancy",children:"managed tenancy"}),". You can choose between the supported tenant claims to implement the appropriate authorization scenario. Navigate to the ",(0,s.jsx)(n.strong,{children:"Claims"})," tab in the Custom Authorization Server to configure one of:"]}),"\n",(0,s.jsxs)(n.h3,{id:"tenants-claim",children:[(0,s.jsx)(n.code,{children:"tenants"})," claim"]}),"\n",(0,s.jsxs)(n.p,{children:["Example configuration for the ",(0,s.jsx)(n.code,{children:"tenants"}),' claim that assigns a single (randomly selected) user group name prefixed with "feldera_" as the tenant name:']}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Name"}),": ",(0,s.jsx)(n.code,{children:"tenants"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Include in token type"}),": ",(0,s.jsx)(n.code,{children:"Access Token"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Value type"}),": ",(0,s.jsx)(n.code,{children:"Expression"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Value"}),": ",(0,s.jsx)(n.code,{children:'{user.getGroups({"group.profile.name": "feldera_", "operator": "STARTS_WITH"})[0].name}'})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Include in"}),": ",(0,s.jsx)(n.code,{children:"Any scope"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"In the above example each user should only have one user group assigned to them that satisfies the condition in the expression value."}),"\n",(0,s.jsxs)(n.p,{children:["Example configuration for the ",(0,s.jsx)(n.code,{children:"tenants"}),' claim that uses all user groups prefixed with "feldera_" as the list of tenants:']}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Name"}),": ",(0,s.jsx)(n.code,{children:"tenants"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Include in token type"}),": ",(0,s.jsx)(n.code,{children:"Access Token"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Value type"}),": ",(0,s.jsx)(n.code,{children:"Expression"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Value"}),": ",(0,s.jsx)(n.code,{children:'user.getGroups({"group.profile.name": "feldera_", "operator": "STARTS_WITH"}).![name]'})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Include in"}),": ",(0,s.jsx)(n.code,{children:"Any scope"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"authorization-through-group-membership-with-a-custom-claim",children:"Authorization through group membership with a custom claim"}),"\n",(0,s.jsxs)(n.p,{children:["Feldera can restrict access based on Okta group membership using the ",(0,s.jsx)(n.code,{children:"groups"})," claim configured in your custom authorization server. This claim is orthogonal to tenant assignment."]}),"\n",(0,s.jsxs)(n.p,{children:["Example configuration for the ",(0,s.jsx)(n.code,{children:"groups"})," claim that communicates all groups that the user is a part of:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Name"}),": ",(0,s.jsx)(n.code,{children:"groups"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Include in token type"}),": ",(0,s.jsx)(n.code,{children:"Access Token"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Value type"}),": ",(0,s.jsx)(n.code,{children:"Groups"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Value"}),": Select appropriate group filter or use all-inclusive regex ",(0,s.jsx)(n.code,{children:".*"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Include in"}),": ",(0,s.jsx)(n.code,{children:"Any scope"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configure-feldera",children:"Configure Feldera"}),"\n",(0,s.jsxs)(n.p,{children:["Consult the documentation for ",(0,s.jsx)(n.a,{href:"/get-started/enterprise/authentication/#Configuration%20options",children:"configuring the authentication"})," and ",(0,s.jsx)(n.a,{href:"/get-started/enterprise/authentication/#Tenant%20Assignment%20use%20cases",children:"examples for common use-cases"})," to configure Feldera to authorize users properly."]}),"\n",(0,s.jsx)(n.p,{children:"One example of the Feldera Helm chart configuration for managed tenancy with Okta:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'auth:\n  enabled: true\n  provider: "okta"\n  clientId: "0oa1a2b3c4d5e6f7g8h9"\n  issuer: "https://dev-12345.okta.com/oauth2/aus1a2b3c4d5e6f7g8h9"\n\nauthorization:\n  individualTenant: false\n  authAudience: "0oa1a2b3c4d5e6f7g8h9"\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);