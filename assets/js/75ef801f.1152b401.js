"use strict";(self.webpackChunkfeldera_docs=self.webpackChunkfeldera_docs||[]).push([[5875],{28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>a});var s=n(96540);const r={},i=s.createContext(r);function l(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:t},e.children)}},75284:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"tutorials/rest_api/cluster-monitoring","title":"Cluster monitoring","description":"A Feldera instance regularly monitors its three primary components","source":"@site/docs/tutorials/rest_api/cluster-monitoring.md","sourceDirName":"tutorials/rest_api","slug":"/tutorials/rest_api/cluster-monitoring","permalink":"/tutorials/rest_api/cluster-monitoring","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Using the REST API","permalink":"/tutorials/rest_api/"},"next":{"title":"Monitoring and Profiling","permalink":"/tutorials/monitoring/"}}');var r=n(74848),i=n(28453);const l={},a="Cluster monitoring",c={},o=[{value:"API usage",id:"api-usage",level:2},{value:"Examples",id:"examples",level:2},{value:"All events",id:"all-events",level:3},{value:"Latest event",id:"latest-event",level:3},{value:"Specific event with all details",id:"specific-event-with-all-details",level:3}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"cluster-monitoring",children:"Cluster monitoring"})}),"\n",(0,r.jsxs)(t.p,{children:["A Feldera instance regularly monitors its three primary components\n(API server, compiler server, and runner) and stores these\n",(0,r.jsx)(t.strong,{children:"cluster monitor events"})," in the internal database.\nOnly a limited number of cluster monitor events are retained in the database,\nnotably at most 1000 and with a time limit of 72 hours (whichever comes first).\nWith this, it is possible to access both the latest health check of the cluster\nand its health in the recent past. The events are accessible through the API."]}),"\n",(0,r.jsxs)(t.p,{children:["The resources monitoring feature is not yet stabilized, but can already be activated by adding\n",(0,r.jsx)(t.code,{children:"cluster_monitor_resources"})," to the Helm chart ",(0,r.jsx)(t.code,{children:"unstableFeatures"})," array value."]}),"\n",(0,r.jsx)(t.h2,{id:"api-usage",children:"API usage"}),"\n",(0,r.jsx)(t.p,{children:"The cluster monitor events can be retrieved via two endpoints:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"/api/list-cluster-events",children:(0,r.jsx)(t.strong,{children:"GET /v0/cluster/events"})}),":\nretrieves all cluster monitor events stored in the database.\nIt returns only the status fields to limit its response size, and further individual event\ndetails can be retrieved via the individual endpoint."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"/api/get-cluster-event",children:(0,r.jsx)(t.strong,{children:"GET /v0/cluster/events/[latest|event-id]?selector=[all|status]"})}),":\nretrieves the details of the latest recorded event, or that of a specific event.\nSpecify ",(0,r.jsx)(t.code,{children:"?selector=all"})," to retrieve more detailed status information for each service\nincluding a human-readable description of the status reported\nby the services themselves and of the Kubernetes resources that back them."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(t.h3,{id:"all-events",children:"All events"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Request"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"curl -X GET http://127.0.0.1:8080/v0/cluster/events | jq\n"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Response"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'[\n  {\n    "id": "019afe45-ec1f-7de0-9cd1-3a6a4350b5e9",\n    "recorded_at": "2025-12-08T14:03:06.655736Z",\n    "all_healthy": true,\n    "api_status": "Healthy",\n    "compiler_status": "Healthy",\n    "runner_status": "Healthy"\n  },\n  {\n    "id": "019afe45-850c-7c82-8271-96a81e843dea",\n    "recorded_at": "2025-12-08T14:02:40.268247Z",\n    "all_healthy": true,\n    "api_status": "Healthy",\n    "compiler_status": "Healthy",\n    "runner_status": "Healthy"\n  },\n  (...)\n]\n'})}),"\n",(0,r.jsx)(t.h3,{id:"latest-event",children:"Latest event"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Request"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"curl -X GET http://127.0.0.1:8080/v0/cluster/events/latest | jq\n"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Response"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'{\n  "id": "019afe45-ec1f-7de0-9cd1-3a6a4350b5e9",\n  "recorded_at": "2025-12-08T14:03:06.655736Z",\n  "all_healthy": true,\n  "api_status": "Healthy",\n  "compiler_status": "Healthy",\n  "runner_status": "Healthy"\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"specific-event-with-all-details",children:"Specific event with all details"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Request"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"curl -X GET http://127.0.0.1:8080/v0/cluster/events/019afe45-ec1f-7de0-9cd1-3a6a4350b5e9?selector=all | jq\n"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Response"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'{\n  "id": "019afe45-ec1f-7de0-9cd1-3a6a4350b5e9",\n  "recorded_at": "2025-12-08T14:03:06.655736Z",\n  "all_healthy": true,\n  "api_status": "Healthy",\n  "api_self_info": "(...)",\n  "api_resources_info": "(...)",\n  "compiler_status": "Healthy",\n  "compiler_self_info": "(...)",\n  "compiler_resources_info": "(...)",\n  "runner_status": "Healthy",\n  "runner_self_info": "(...)",\n  "runner_resources_info": "(...)"\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["... with ",(0,r.jsx)(t.code,{children:'"(...)"'})," representing human-readable status explanations (omitted for brevity)."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);