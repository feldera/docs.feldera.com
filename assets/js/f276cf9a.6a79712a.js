"use strict";(self.webpackChunkfeldera_docs=self.webpackChunkfeldera_docs||[]).push([[305],{28453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>a});var t=o(96540);const r={},i=t.createContext(r);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:n},e.children)}},83372:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>x,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"contributors/dev-flow","title":"Development workflow","description":"Develop from Devcontainer","source":"@site/docs/contributors/dev-flow.md","sourceDirName":"contributors","slug":"/contributors/dev-flow","permalink":"/contributors/dev-flow","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var r=o(74848),i=o(28453);const s={},a="Development workflow",l={},d=[{value:"Develop from Devcontainer",id:"develop-from-devcontainer",level:2},{value:"Authenticated mode",id:"authenticated-mode",level:4},{value:"AWS Cognito",id:"aws-cognito",level:5},{value:"Google Identity Platform",id:"google-identity-platform",level:5},{value:"Run benchmarks",id:"run-benchmarks",level:2},{value:"NEXMark benchmark",id:"nexmark-benchmark",level:4}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"development-workflow",children:"Development workflow"})}),"\n",(0,r.jsx)(n.h2,{id:"develop-from-devcontainer",children:"Develop from Devcontainer"}),"\n",(0,r.jsx)(n.p,{children:"A simple way to start interacting with the Feldera source code is via the supplied Devcontainer. It will prepare an environment which will let you build and run all components of Feldera out-of-the-box."}),"\n",(0,r.jsxs)(n.p,{children:["Spin up the Devcontainer, e.g. by opening the Feldera repository in VS Code with ",(0,r.jsx)(n.a,{href:"vscode:extension/ms-vscode-remote.remote-containers",children:"Dev Containers"})," extension enabled."]}),"\n",(0,r.jsx)(n.p,{children:"On your first launch you might need to change the ownership of the files:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo chown -R user /workspaces/feldera\n"})}),"\n",(0,r.jsx)(n.p,{children:"Build the SQL Compiler:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ./sql-to-dbsp-compiler && ./build.sh && cd ..\n"})}),"\n",(0,r.jsx)(n.p,{children:"Build and start the Pipeline Manager (that also serves the Feldera Web Console):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"RUST_LOG=info RUST_BACKTRACE=1 cargo run --bin pipeline-manager -- --db-connection-string postgres-embed --dev-mode --bind-address 0.0.0.0 --dbsp-override-path .  --compiler-working-directory ~/.feldera --runner-working-directory ~/.feldera\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Here, ",(0,r.jsx)(n.code,{children:"~/.feldera"})," is the directory that will host compilation artifacts of SQL Compiler and other state of the Pipeline Manager and the pipelines. It will be created if it doesn't exist, and you can use a different directory."]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--dbsp-override-path ."})," should be the path of the Feldera repository root - so update the argument if you are running from a different directory."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["You should now be able to access the Web Console at ",(0,r.jsx)(n.a,{href:"http://127.0.0.1:8080/",children:"http://127.0.0.1:8080/"}),", connected to your local Pipeline Manager instance!"]}),"\n",(0,r.jsx)(n.p,{children:"You can also open Web Console in dev mode to be able to see your changes to it live:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd web-console && bun install && bun run dev\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The Web Console in dev mode is available at ",(0,r.jsx)(n.a,{href:"http://127.0.0.1:3000/",children:"http://127.0.0.1:3000/"})]}),"\n",(0,r.jsxs)(n.p,{children:["Now you can proceed with the ",(0,r.jsx)(n.a,{href:"#manually-starting-the-demos",children:"demo"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"authenticated-mode",children:"Authenticated mode"}),"\n",(0,r.jsx)(n.p,{children:"In Authenticated mode, you need to login via the Web Console using one of the supported OAuth providers (e.g. AWS Cognito). The Pipeline Manager will require Bearer authorization header for protected requests."}),"\n",(0,r.jsx)(n.p,{children:"Start the Pipeline Manager in authenticated mode, substituting values from your environment:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"FELDERA_AUTH_CLIENT_ID=<client-id> FELDERA_AUTH_ISSUER=<issuer> <see below for additional environment variables> \\\r\n cargo run --bin pipeline-manager -- --auth-provider=aws-cognito\n"})}),"\n",(0,r.jsx)(n.h5,{id:"aws-cognito",children:"AWS Cognito"}),"\n",(0,r.jsxs)(n.p,{children:["First, setup an AWS Cognito user pool, configure an app client and enable the\r\n",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-app-integration.html#cognito-user-pools-app-integration-amplify",children:"Amplify-based hosted\r\nUI"}),".\r\nWhen setting up the hosted UI, setup a redirect URI as\r\n",(0,r.jsx)(n.code,{children:"<feldera-api-url>/auth/aws/"})," (note the trailing slash). For example, when\r\nrunning Feldera on 127.0.0.1:8080, the redirect URI should be\r\n",(0,r.jsx)(n.code,{children:"http://127.0.0.1:8080/auth/aws/"}),". In this process, you will also set up a\r\n",(0,r.jsx)(n.code,{children:"Cognito domain"}),", which will be something like\r\n",(0,r.jsx)(n.code,{children:"https://<domain-name>.auth.us-east-1.amazoncognito.com"}),". This domain forms the\r\nbase of the ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/cognito/latest/developerguide/login-endpoint.html",children:"login and logout\r\nURL"}),"\r\nwhich you will need below."]}),"\n",(0,r.jsx)(n.p,{children:"Additional variables for AWS Cognito:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["AWS_COGNITO_LOGIN_URL: URL to Cognito Hosted UI login, omitting query parameters ",(0,r.jsx)(n.code,{children:"redirect_uri"})," and ",(0,r.jsx)(n.code,{children:"state"})]}),"\n",(0,r.jsxs)(n.li,{children:["AWS_COGNITO_LOGOUT_URL: URL to Cognito Hosted UI logout, omitting query parameters ",(0,r.jsx)(n.code,{children:"redirect_uri"})," and ",(0,r.jsx)(n.code,{children:"state"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'FELDERA_AUTH_CLIENT_ID=xxxxxxxxxxxxxxxxxxxxxxxxxx FELDERA_AUTH_ISSUER=https://cognito-idp.us-east-1.amazonaws.com/us-east-1_xxxxxxxxx AWS_COGNITO_LOGIN_URL="https://itest-pool.auth.us-east-1.amazoncognito.com/login\\?client_id=xxxxxxxxxxxxxxxxxxxxxxxxxx&response_type=token&scope=email+openid" AWS_COGNITO_LOGOUT_URL="https://itest-pool.auth.us-east-1.amazoncognito.com/logout\\?client_id=xxxxxxxxxxxxxxxxxxxxxxxxxx&response_type=token&scope=email+openid" RUST_LOG=debug,tokio_postgres=info cargo run --bin=pipeline-manager -- --dev-mode --auth-provider aws-cognito\n'})}),"\n",(0,r.jsx)(n.h5,{id:"google-identity-platform",children:"Google Identity Platform"}),"\n",(0,r.jsx)(n.p,{children:"Additional variables for Google Identity Platform: none"}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'FELDERA_AUTH_CLIENT_ID=xxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.apps.googleusercontent.com FELDERA_AUTH_ISSUER="https://accounts.google.com" RUST_LOG=debug,tokio_postgres=info cargo run --bin=pipeline-manager -- --dev-mode --auth-provider google-identity\n'})}),"\n",(0,r.jsx)(n.h2,{id:"run-benchmarks",children:"Run benchmarks"}),"\n",(0,r.jsx)(n.p,{children:"You can run bundled benchmarks in devcontainer."}),"\n",(0,r.jsx)(n.h4,{id:"nexmark-benchmark",children:"NEXMark benchmark"}),"\n",(0,r.jsx)(n.p,{children:"Example running one of nexmark queries:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd benchmark\r\n./run-nexmark.sh -L sql --query 9 --partitions 1 --events 10M --kafka-broker redpanda:9092\n"})})]})}function x(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);