"use strict";(self.webpackChunkfeldera_docs=self.webpackChunkfeldera_docs||[]).push([[5436],{28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>i});var t=s(96540);const r={},o=t.createContext(r);function c(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(o.Provider,{value:n},e.children)}},35848:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"connectors/sources/s3","title":"S3 input connector","description":"This page describes configuration options specific to the S3 input connector.","source":"@site/docs/connectors/sources/s3.md","sourceDirName":"connectors/sources","slug":"/connectors/sources/s3","permalink":"/connectors/sources/s3","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PostgreSQL","permalink":"/connectors/sources/postgresql"},"next":{"title":"Data Generator","permalink":"/connectors/sources/datagen"}}');var r=s(74848),o=s(28453);const c={},i="S3 input connector",d={},a=[{value:"Configuration options",id:"configuration-options",level:2},{value:"Support for AWS IAM roles for service accounts (IRSA)",id:"support-for-aws-iam-roles-for-service-accounts-irsa",level:3},{value:"Examples",id:"examples",level:2},{value:"Additional resources",id:"additional-resources",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"s3-input-connector",children:"S3 input connector"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["This page describes configuration options specific to the S3 input connector.\nSee ",(0,r.jsx)(n.a,{href:"/connectors/",children:"top-level connector documentation"})," for general information\nabout configuring input and output connectors."]})}),"\n",(0,r.jsxs)(n.p,{children:["The S3 input connector is used to load data from an S3 bucket to a Feldera table.\nIt can be configured to load a single object or multiple objects selected based on a\ncommon S3 prefix. By setting the ",(0,r.jsx)(n.code,{children:"endpoint_url"}),", you can also read from non-AWS services\nthat offer S3 compatible APIs."]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["When accessing an S3 bucket that stores data in the Delta Lake or Iceberg format, consider\nusing the ",(0,r.jsx)(n.a,{href:"/connectors/sources/delta",children:"Delta Lake connector"})," or the\n",(0,r.jsx)(n.a,{href:"/connectors/sources/iceberg",children:"Iceberg connector"})," connector instead."]})}),"\n",(0,r.jsxs)(n.p,{children:["The S3 input connector supports ",(0,r.jsx)(n.a,{href:"/pipelines/fault-tolerance",children:"fault tolerance"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"configuration-options",children:"Configuration options"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"aws_access_key_id"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{}),(0,r.jsxs)(n.td,{children:["AWS Access Key id. This property must be specified unless ",(0,r.jsx)(n.code,{children:"no_sign_request"})," is set to ",(0,r.jsx)(n.code,{children:"true"}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"aws_secret_access_key"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{}),(0,r.jsxs)(n.td,{children:["Secret Access Key. This property must be specified unless ",(0,r.jsx)(n.code,{children:"no_sign_request"})," is set to ",(0,r.jsx)(n.code,{children:"true"}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"no_sign_request"})}),(0,r.jsx)(n.td,{children:"bool"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})}),(0,r.jsxs)(n.td,{children:["Do not sign requests. This is equivalent to the ",(0,r.jsx)(n.code,{children:"--no-sign-request"})," flag in the AWS CLI."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"key"}),(0,r.jsx)(n.sup,{children:(0,r.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})]}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Read a single object specified by a key."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"prefix"}),(0,r.jsx)(n.sup,{children:(0,r.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})]}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Read all objects whose keys match a prefix. Set to an empty string to read all objects in the bucket."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"region"}),(0,r.jsx)(n.sup,{children:(0,r.jsx)(n.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})})]}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"AWS region."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"bucket_name"}),(0,r.jsx)(n.sup,{children:(0,r.jsx)(n.a,{href:"#user-content-fn-2",id:"user-content-fnref-2-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})})]}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"S3 bucket name."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"endpoint_url"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{}),(0,r.jsxs)(n.td,{children:["The endpoint URL used to communicate with this service. Explicitly set it to connect to non-AWS services. For example, use ",(0,r.jsx)(n.code,{children:"https://storage.googleapis.com"})," to interact with Google Cloud Storage."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"max_concurrent_fetches"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"8"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)("p",{children:"Controls the number of S3 objects fetched in parallel."}),(0,r.jsx)("p",{children:"Increasing this value can improve throughput by enabling greater concurrency. However, higher concurrency may lead to timeouts or increased memory usage due to in-memory buffering."}),(0,r.jsx)("p",{children:"Recommended range: 1\u201310. Default: 8."})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"max_retries"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"5"}),(0,r.jsxs)(n.td,{children:["Retry ",(0,r.jsx)(n.code,{children:"max_retries"})," times with exponential backoff. ",(0,r.jsx)("p",{children:"If the object changes during a retry attempt, the remaining part of the object will not be processed."})]})]})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"prefix"})," is used, Feldera reads objects in alphabetical order,\nthe order returned by S3's ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjectsV2.html",children:"ListObjectsV2"})," operation.  When\n",(0,r.jsx)(n.code,{children:"max_concurrent_fetches"})," is greater than 1, data is processed in\nparallel for up to the specified number of objects, rather than\nsequentially from one object to the next."]})}),"\n",(0,r.jsx)(n.h3,{id:"support-for-aws-iam-roles-for-service-accounts-irsa",children:"Support for AWS IAM roles for service accounts (IRSA)"}),"\n",(0,r.jsxs)(n.p,{children:["To use ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html",children:"AWS IAM roles for service accounts (IRSA)"}),",\nyou must ",(0,r.jsx)(n.strong,{children:"skip"})," supplying the fields ",(0,r.jsx)(n.code,{children:"aws_access_key_id"})," and ",(0,r.jsx)(n.code,{children:"aws_secret_access_key"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Feldera will pick up the credentials from the environment variables."}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.p,{children:"Populate a table from a JSON file in a public S3 bucket:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE vendor (\n    id BIGINT NOT NULL PRIMARY KEY,\n    name VARCHAR,\n    address VARCHAR\n) WITH (\'connectors\' = \'[{\n    "transport": {\n        "name": "s3_input",\n        "config": {\n            "key": "vendor.json",\n            "no_sign_request": true,\n            "bucket_name": "feldera-basics-tutorial",\n            "region": "us-west-1"\n        }\n    },\n    "format": { "name": "json" }\n}]\');\n'})}),"\n",(0,r.jsx)(n.p,{children:"Populate a table from a JSON file, using access key-based authentication:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE vendor (\n    id BIGINT NOT NULL PRIMARY KEY,\n    name VARCHAR,\n    address VARCHAR\n) WITH (\'connectors\' = \'[{\n    "transport": {\n        "name": "s3_input",\n        "config": {\n            "key": "vendor.json",\n            "aws_access_key_id": "YOUR_ACCESS_KEY_ID",\n            "aws_secret_access_key": "YOUR_SECRET_ACCESS_KEY",\n            "bucket_name": "feldera-basics-tutorial",\n            "region": "us-west-1"\n        }\n    },\n    "format": { "name": "json" }\n}]\');\n'})}),"\n",(0,r.jsxs)(n.p,{children:["To connect to Google Cloud Storage, ",(0,r.jsx)(n.a,{href:"https://cloud.google.com/storage/docs/interoperability",children:"explicitly set"})," the ",(0,r.jsx)(n.code,{children:"endpoint_url"}),". You also\nneed to configure an ",(0,r.jsx)(n.a,{href:"https://cloud.google.com/storage/docs/authentication/hmackeys",children:"HMAC\nkey"})," to get an\nAccess ID and Secret. You will also need to grant the corresponding Principal\naccess to the bucket."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE vendor (\n    id BIGINT NOT NULL PRIMARY KEY,\n    name VARCHAR,\n    address VARCHAR\n) WITH (\'connectors\' = \'[{\n    "transport": {\n        "name": "s3_input",\n        "config": {\n            "key": "vendor.json",\n            "aws_access_key_id": "YOUR_ACCESS_KEY_ID",\n            "aws_secret_access_key": "YOUR_SECRET_ACCESS_KEY",\n            "bucket_name": "my-bucket",\n            "region": "us-west1",\n            "endpoint_url": "https://storage.googleapis.com"\n        }\n    },\n    "format": { "name": "json" }\n}]\');\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["Refer to the ",(0,r.jsx)(n.a,{href:"/connectors/secret-references",children:"secret references"})," guide\nto externalize AWS access keys via Kubernetes."]})}),"\n",(0,r.jsx)(n.h2,{id:"additional-resources",children:"Additional resources"}),"\n",(0,r.jsx)(n.p,{children:"For more information, see:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/connectors/",children:"Top-level connector documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/formats",children:"Supported data formats"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/connectors/sources/delta",children:"Delta Lake input connector documentation"})}),"\n"]}),"\n","\n",(0,r.jsxs)(n.section,{"data-footnotes":!0,className:"footnotes",children:[(0,r.jsx)(n.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{id:"user-content-fn-1",children:["\n",(0,r.jsxs)(n.p,{children:["Exactly one of ",(0,r.jsx)(n.code,{children:"key"})," or ",(0,r.jsx)(n.code,{children:"prefix"})," must be set. ",(0,r.jsx)(n.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})," ",(0,r.jsxs)(n.a,{href:"#user-content-fnref-1-2","data-footnote-backref":"","aria-label":"Back to reference 1-2",className:"data-footnote-backref",children:["\u21a9",(0,r.jsx)(n.sup,{children:"2"})]})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{id:"user-content-fn-2",children:["\n",(0,r.jsxs)(n.p,{children:["This property is required. ",(0,r.jsx)(n.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"\u21a9"})," ",(0,r.jsxs)(n.a,{href:"#user-content-fnref-2-2","data-footnote-backref":"","aria-label":"Back to reference 2-2",className:"data-footnote-backref",children:["\u21a9",(0,r.jsx)(n.sup,{children:"2"})]})]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);